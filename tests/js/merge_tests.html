<!DOCTYPE html>
<html>
<head>
    <meta lang="en">
    <title>Javascript tests</title>
    <link type="text/css" rel="stylesheet" href="../../css/main.css">
    <link rel="stylesheet" href="qunit-1.18.0.css">
    <link href='http://fonts.googleapis.com/css?family=Raleway:400,100' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Lato:100,300' rel='stylesheet' type='text/css'>
    <script type="text/javascript" src="../../js/imagesloaded.pkgd.min.js"></script>
    <script src="../../js/packery.pkgd.min.js"></script>
    <script type="text/javascript" src="../../js/draggabilly.pkgd.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
</head>
<body>

    <div id="qunit"></div>
    <div id="qunit-fixture"></div>

    <div id="container">
    
        <div id="item1" class="packery-item">
            <img src="http://pbs.twimg.com/media/B4boCpyCEAExIYo.jpg">
            <button class="merge">Merge</button>
            <div class="image-footer">
                <div class="share-count">
                    <span class="count">5</span> shares
                </div>
            </div>
            <div class="pin"></div>
        </div>
    
        <div id="item2" class="packery-item">
            <img src="http://pbs.twimg.com/media/B0vMX4nCQAEK63o.jpg">
            <button class="merge">Merge</button>
            <div class="image-footer">
                <div class="share-count">
                    <span class="count">4</span> shares
                </div>
            </div>
            <div class="pin"></div>
        </div>
    
        <div id="item3" class="packery-item">
            <img src="http://pbs.twimg.com/media/B51oL3fIcAA9j9L.png">
            <button class="merge">Merge</button>
            <div class="image-footer">
                <div class="share-count">
                    <span class="count">2</span> shares
                </div>
            </div>
            <div class="pin"></div>
        </div>
    
        <div id="item4" class="packery-item">
            <img src="http://pbs.twimg.com/media/A4nysuNCQAERXAW.jpg">
            <button class="merge">Merge</button>
            <div class="image-footer">
                <div class="share-count">
                    <span class="count">1</span> share
                </div>
            </div>
            <div class="pin"></div>
        </div>
    
        <div id="item5" class="packery-item">
            <img src="http://pbs.twimg.com/media/AhCjxLyCQAAZ7Ug.jpg">
            <button class="merge">Merge</button>
            <div class="image-footer">
                <div class="share-count">
                    <span class="count">1</span> share
                </div>
            </div>
            <div class="pin"></div>
        </div>
    
        <div id="item6" class="packery-item">
            <img src="http://pbs.twimg.com/media/Ajxb2c6CQAAzQTg.jpg">
            <button class="merge">Merge</button>
            <div class="image-footer">
                <div class="share-count">
                    <span class="count">1</span> share
                </div>
            </div>
            <div class="pin"></div>
        </div>
    
        <div id="item7" class="packery-item">
            <img src="http://pbs.twimg.com/media/AoxQ3CECIAAsArF.jpg">
            <button class="merge">Merge</button>
            <div class="image-footer">
                <div class="share-count">
                    <span class="count">1</span> share
                </div>
            </div>
            <div class="pin"></div>
        </div>
    
        <div id="item8" class="packery-item">
            <img src="http://pbs.twimg.com/media/B05WaEVIQAA9JMu.jpg">
            <button class="merge">Merge</button>
            <div class="image-footer">
                <div class="share-count">
                    <span class="count">1</span> share
                </div>
            </div>
            <div class="pin"></div>
        </div>
    
        <div id="item9" class="packery-item">
            <img src="http://pbs.twimg.com/media/B0nPH21IIAAeHiw.jpg">
            <button class="merge">Merge</button>
            <div class="image-footer">
                <div class="share-count">
                    <span class="count">1</span> share
                </div>
            </div>
            <div class="pin"></div>
        </div>
    
        <div id="item10" class="packery-item">
            <img src="http://pbs.twimg.com/media/B2phtptIMAE0rge.jpg">
            <button class="merge">Merge</button>
            <div class="image-footer">
                <div class="share-count">
                    <span class="count">1</span> share
                </div>
            </div>
            <div class="pin"></div>
        </div>
    
        <div id="item11" class="packery-item">
            <img src="http://pbs.twimg.com/media/B2PlfAkCUAE0886.png">
            <button class="merge">Merge</button>
            <div class="image-footer">
                <div class="share-count">
                    <span class="count">1</span> share
                </div>
            </div>
            <div class="pin"></div>
        </div>
    
        <div id="item12" class="packery-item">
            <img src="http://pbs.twimg.com/media/B51ijpPCUAEbBeE.jpg">
            <button class="merge">Merge</button>
            <div class="image-footer">
                <div class="share-count">
                    <span class="count">1</span> share
                </div>
            </div>
            <div class="pin"></div>
        </div>
    
        <div id="item13" class="packery-item">
            <img src="http://pbs.twimg.com/media/B51l7U3IUAAr9-E.jpg">
            <button class="merge">Merge</button>
            <div class="image-footer">
                <div class="share-count">
                    <span class="count">1</span> share
                </div>
            </div>
            <div class="pin"></div>
        </div>
    
        <div id="item14" class="packery-item">
            <img src="http://pbs.twimg.com/media/777777777777777.png">
            <button class="merge">Merge</button>
            <div class="image-footer">
                <div class="share-count">
                    <span class="count">1</span> share
                </div>
            </div>
            <div class="pin"></div>
        </div>
    
    </div>
    <script src="../../js/resize.js"></script>
    <script src="qunit-1.18.0.js"></script>
    <script type="text/javascript">
        $(test("Test borders turn on and off in modify mode", function (assert) {
            assert.equal(window.mode, 'drag');

            // Expand item1
            $('#item1').dblclick();
            assert.ok($('#item1').hasClass('expanded'));

            //Roll mouse over another item and check nothing happens
            $('#item10').mouseover();
            assert.equal($('#item10').css("border-width"), "0px");

            // Click button, check the border changes.
            $button = $('#item1 button.merge');
            $button.click();
            assert.equal(window.mode, 'merge');

            $('#item10').mouseover();
            b_w_string = $('#item10').css("border-width").slice(0,-2);
            border_width = parseInt(b_w_string);
            assert.ok(border_width > 0);
            $('#item10').mouseleave();

            $button.click();
            assert.equal(window.mode, 'drag');
            $('#item10').mouseover();
            assert.equal($('#item10').css("border-width"), "0px");
            $('#item1').dblclick();
        }));

        $(test("Borders remain on click in merge mode", function(assert){
            // Expand item1
            $('#item2').dblclick();
            assert.ok($('#item2').hasClass('expanded'));

            //Click mouse over another item and check nothing happens
            $('#item9').click();
            assert.equal($('#item9').css("border-width"), "0px");

            // Click button, check the variable changes.
            $button = $('#item1 button.merge');
            $button.click();
            assert.equal(window.mode, 'merge');

            // Click item again, check border appears and remains
            $('#item9').click();
            assert.equal($('#item9').css("border-width"), "0px");
            b_w_string = $('#item10').css("border-width").slice(0,-2);
            border_width = parseInt(b_w_string);
            assert.ok(border_width > 0);

            // Click a third time, check disappears
            $('#item9').click();
            assert.equal($('#item9').css("border-width"), "0px");
            $('#item2').dblclick();
        }));

    </script>
</body>
</html>